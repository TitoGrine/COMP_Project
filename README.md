# COMP - Project 1

For this project, you need to [install Gradle](https://gradle.org/install/)

## Project setup

Copy your ``.jjt`` file to the ``javacc`` folder. If you change any of the classes generated by ``jjtree`` or ``javacc``, you also need to copy them to the ``javacc`` folder.

Copy your source files to the ``src`` folder, and your JUnit test files to the ``test`` folder.

## Compile

To compile the program, run ``gradle build``. This will compile your classes to ``classes/main/java`` and copy the JAR file to the root directory. The JAR file will have the same name as the repository folder.

### Run

To run you have two options: Run the ``.class`` files or run the JAR.

### Run ``.class``

To run the ``.class`` files, do the following:

```cmd
java -cp "./build/classes/java/main/" <class_name> <arguments>
```

Where ``<class_name>`` is the name of the class you want to run and ``<arguments>`` are the arguments to be passed to ``main()``.

### Run ``.jar``

To run the JAR, do the following command:

```cmdchrome://vivaldi-webui/startpage?section=Speed-dials&activeSpeedDialIndex=0&background-color=#1b2224
java -jar <jar filename> <arguments>
```

Where ``<jar filename>`` is the name of the JAR file that has been copied to the root folder, and ``<arguments>`` are the arguments to be passed to ``main()``.

## Test

To test the program, run ``gradle test``. This will execute the build, and run the JUnit tests in the ``test`` folder. If you want to see output printed during the tests, use the flag ``-i`` (i.e., ``gradle test -i``).

## Execution Control

In the ``javacc`` folder there is a class ``ControlVars.java`` that hold some variables that control the execution of the parser, allowing for some
costumization. Here are the description of each of those variables.

|         Variable        |                                                                    Description                                                                     |
|-------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------|
| ANALYSE_SEMANTICS       | If **true**, it performs the semantic analysis of the code.                                                                                        |
| ANALYSE_SCOPE_VAR_INIT  | If **true**, it will check whether variable are only initialized within if, else or while scopes and  therefore might not be initialized when used.|
| THROW_VAR_INIT_ERROR    | If **true**, variables that are used but are not initialized will throw an error instead of a warning.                                             |
| THROW_WARNING_EXCEPTION | If **true**, warnings will throw an exception causing the semantic analysis to fail.                                                               |
| PRINT_SYMBOL_TABLE      | If **true**, it prints the symbol table of each meaningful scope.                                                                                  |
| PRINT_AST               | If **true**, it prints the Abstract Syntax Tree.                                                                                                   |
| RUN_CUSTOM_TESTS        | If **true**, it will run tests for custom made ``.jmm`` files.                                                                                     |
| SAVE_JASMIN_CODE        |                                          |

## Checklist

1. ~~Develop a parser for **Java--** using JavaCC and taking as starting point the Java-- grammar furnished.~~
2. ~~Include error treatment and recovery mechanisms.~~
3. ~~Proceed with the specification of the file **jjt** to generate, using JJTree, a new version of the parser
including in this case the generation of the syntax tree (the generated tree should be an AST), annotating the nodes
and leafs of the tree with the information (including tokens) necessary to perform the subsequent compiler steps.~~
4. ~~Include the necessary symbol tables.~~
5. ~~Semantic Analysis.~~
6. ~~Generate JVM code accepted by jasmin corresponding to the invocation of functions in **Java--**.~~
7. ~~Generate JVM code accepted by jasmin for arithmetic expressions.~~
8. ~~Generate JVM code accepted by jasmin for conditional instructions (if and if-else).~~
9. ~~Generate JVM code accepted by jasmin for loops.~~
10. ~~Generate JVM code accepted by jasmin to deal with arrays.~~
11. ~~Complete the compiler and test it using a set of Java-- classes.~~
12. ~~Proceed with the optimizations related to the code generation, related to the register allocation (“-r” option) and the optimizations related to the “-o” option.~~

 
 